<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>LINE ‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£ ¬∑ ‡πÄ‡∏ß‡∏¥‡∏£‡πå‡∏Ñ‡∏û‡∏≠‡∏¢‡∏ó‡πå‡∏ô‡∏¥‡∏ß‡∏™‡πå</title>
    
    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Thai:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- LINE LIFF -->
    <script src="https://static.line-scdn.net/liff/edge/2.1/sdk.js"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        * {
            font-family: 'IBM Plex Sans Thai', sans-serif;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --primary: #06c755;
            --primary-dark: #05b34a;
            --bg: #f5f5f5;
            --bg-card: #ffffff;
            --border: #e5e7eb;
            --text: #1f2937;
            --text-secondary: #6b7280;
            --text-light: #9ca3af;
        }
        
        body {
            background-color: var(--bg);
            color: var(--text);
            padding-bottom: 70px;
        }
        
        /* Header */
        .site-header {
            background: white;
            padding: 12px 16px;
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 40;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .logo {
            font-size: 20px;
            font-weight: 700;
            color: var(--primary);
        }
        
        .logo span {
            color: var(--text);
            font-weight: 400;
        }
        
        /* Category Nav */
        .category-nav {
            background: white;
            padding: 8px 16px;
            border-bottom: 1px solid var(--border);
            overflow-x: auto;
            white-space: nowrap;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
            position: sticky;
            top: 60px;
            z-index: 30;
        }
        
        .category-nav::-webkit-scrollbar {
            display: none;
        }
        
        .category-item {
            display: inline-block;
            padding: 6px 16px;
            margin-right: 8px;
            border-radius: 30px;
            background: #f3f4f6;
            color: var(--text-secondary);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .category-item.active {
            background: var(--primary);
            color: white;
        }
        
        .category-item.breaking {
            background: #ef4444;
            color: white;
        }
        
        /* News Grid */
        .news-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 16px;
            padding: 16px;
        }
        
        @media (min-width: 640px) {
            .news-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (min-width: 1024px) {
            .news-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        
        /* News Card */
        .news-card {
            background: var(--bg-card);
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            border: 1px solid var(--border);
        }
        
        .news-card:active {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .card-image-container {
            position: relative;
            width: 100%;
            aspect-ratio: 16/9;
            overflow: hidden;
            background: #e5e7eb;
        }
        
        .card-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s;
        }
        
        .news-card:hover .card-image {
            transform: scale(1.05);
        }
        
        .card-category {
            position: absolute;
            top: 12px;
            left: 12px;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
            color: white;
            z-index: 2;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .category-‡∏≠‡∏≤‡∏ä‡∏ç‡∏≤‡∏Å‡∏£‡∏£‡∏° { background: #ef4444; }
        .category-‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏∑‡∏≠‡∏á { background: #3b82f6; }
        .category-‡∏ï‡πà‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏® { background: #8b5cf6; }
        .category-‡∏ö‡∏±‡∏ô‡πÄ‡∏ó‡∏¥‡∏á { background: #ec4899; }
        .category-‡πÄ‡∏®‡∏£‡∏©‡∏ê‡∏Å‡∏¥‡∏à { background: #10b981; }
        .category-‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡πà‡∏≠‡∏á‡πÄ‡∏•‡∏Ç { background: #f59e0b; }
        
        .share-button {
            position: absolute;
            top: 12px;
            right: 12px;
            background: rgba(0,0,0,0.6);
            backdrop-filter: blur(4px);
            color: #00B900;
            width: 36px;
            height: 36px;
            border-radius: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: none;
            cursor: pointer;
            z-index: 10;
            transition: all 0.2s;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }
        
        .share-button:active {
            transform: scale(0.95);
            background: rgba(0,0,0,0.8);
        }
        
        .share-button i {
            font-size: 18px;
        }
        
        .card-content {
            padding: 16px;
        }
        
        .card-title {
            font-size: 16px;
            font-weight: 600;
            line-height: 1.4;
            margin-bottom: 8px;
            color: var(--text);
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .card-meta {
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-size: 12px;
            color: var(--text-light);
        }
        
        .card-meta i {
            margin-right: 4px;
            font-size: 10px;
        }
        
        .view-count {
            display: flex;
            align-items: center;
            gap: 2px;
        }
        
        /* Section Header */
        .section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px 16px 8px;
        }
        
        .section-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--text);
        }
        
        .section-title i {
            color: var(--primary);
            margin-right: 8px;
        }
        
        .view-all {
            color: var(--primary);
            font-size: 14px;
            font-weight: 500;
        }
        
        /* Breaking News Ticker */
        .breaking-ticker {
            background: #ef4444;
            color: white;
            padding: 12px 16px;
            margin: 16px 16px 0;
            border-radius: 12px;
            display: flex;
            align-items: center;
            gap: 12px;
            overflow-x: auto;
            white-space: nowrap;
            -webkit-overflow-scrolling: touch;
        }
        
        .ticker-label {
            background: rgba(255,255,255,0.2);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            flex-shrink: 0;
        }
        
        .ticker-item {
            font-size: 14px;
            cursor: pointer;
            flex-shrink: 0;
            padding-right: 20px;
        }
        
        .ticker-item:not(:last-child)::after {
            content: "‚Ä¢";
            margin-left: 20px;
            opacity: 0.5;
        }
        
        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            border-top: 1px solid var(--border);
            display: flex;
            justify-content: space-around;
            padding: 8px 0 12px;
            z-index: 50;
        }
        
        .nav-item {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            color: var(--text-light);
            font-size: 11px;
            cursor: pointer;
        }
        
        .nav-item.active {
            color: var(--primary);
        }
        
        .nav-item i {
            font-size: 20px;
        }
        
        /* Modal */
        .modal {
            position: fixed;
            inset: 0;
            background: white;
            z-index: 100;
            display: none;
            overflow-y: auto;
        }
        
        .modal.active {
            display: block;
        }
        
        .modal-header {
            position: sticky;
            top: 0;
            background: white;
            padding: 16px;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            gap: 16px;
            z-index: 10;
        }
        
        .modal-back {
            width: 40px;
            height: 40px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f3f4f6;
            cursor: pointer;
        }
        
        .modal-image {
            width: 100%;
            aspect-ratio: 16/9;
            object-fit: cover;
        }
        
        .modal-content {
            padding: 20px;
        }
        
        .modal-category {
            display: inline-block;
            padding: 4px 16px;
            border-radius: 30px;
            font-size: 12px;
            font-weight: 600;
            color: white;
            margin-bottom: 12px;
        }
        
        .modal-title {
            font-size: 24px;
            font-weight: 700;
            line-height: 1.3;
            margin-bottom: 16px;
        }
        
        .modal-body {
            font-size: 16px;
            line-height: 1.6;
            color: #4b5563;
            margin: 20px 0;
            white-space: pre-wrap;
        }
        
        .modal-footer {
            padding: 20px;
            border-top: 1px solid var(--border);
            display: flex;
            gap: 12px;
        }
        
        .btn-share {
            background: #00B900;
            color: white;
            padding: 14px;
            border-radius: 30px;
            font-weight: 600;
            border: none;
            flex: 2;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            cursor: pointer;
        }
        
        .btn-close {
            background: #f3f4f6;
            color: var(--text);
            padding: 14px;
            border-radius: 30px;
            font-weight: 600;
            border: none;
            flex: 1;
            cursor: pointer;
        }
        
        /* Loading */
        .loading {
            position: fixed;
            inset: 0;
            background: rgba(255,255,255,0.9);
            z-index: 200;
            display: none;
            align-items: center;
            justify-content: center;
        }
        
        .loading.active {
            display: flex;
        }
        
        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid #e5e7eb;
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Toast */
        .toast {
            position: fixed;
            bottom: 80px;
            left: 16px;
            right: 16px;
            background: #1f2937;
            color: white;
            border-radius: 30px;
            padding: 12px 20px;
            z-index: 1000;
            display: none;
            animation: slideUp 0.3s ease;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        
        .toast.show {
            display: block;
        }
        
        @keyframes slideUp {
            from { transform: translateY(100%); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        /* Lottery */
        .lottery-card {
            background: linear-gradient(135deg, #f59e0b, #fbbf24);
            color: white;
            padding: 16px;
            border-radius: 16px;
            margin: 16px;
            box-shadow: 0 4px 12px rgba(245,158,11,0.3);
        }
        
        .lottery-numbers {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-top: 12px;
        }
        
        .lottery-number {
            background: rgba(255,255,255,0.2);
            backdrop-filter: blur(4px);
            padding: 12px;
            border-radius: 12px;
            text-align: center;
            font-weight: 700;
        }
        
        .lottery-number .label {
            font-size: 10px;
            opacity: 0.8;
            margin-bottom: 4px;
        }
        
        .lottery-number .value {
            font-size: 20px;
        }
    </style>
</head>
<body>
    <!-- Loading -->
    <div class="loading" id="loading">
        <div class="spinner"></div>
    </div>
    
    <!-- Toast -->
    <div class="toast" id="toast"></div>

    <!-- Header -->
    <header class="site-header">
        <div class="logo">LINE<span>‡∏ô‡∏¥‡∏ß‡∏™‡πå</span></div>
        <div class="flex items-center gap-3">
            <i class="fas fa-search text-gray-500"></i>
            <i class="fas fa-user-circle text-2xl text-gray-500"></i>
        </div>
    </header>

    <!-- Category Nav -->
    <div class="category-nav">
        <span class="category-item active" data-category="all">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</span>
        <span class="category-item" data-category="‡∏≠‡∏≤‡∏ä‡∏ç‡∏≤‡∏Å‡∏£‡∏£‡∏°">‡∏≠‡∏≤‡∏ä‡∏ç‡∏≤‡∏Å‡∏£‡∏£‡∏°</span>
        <span class="category-item" data-category="‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏∑‡∏≠‡∏á">‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏∑‡∏≠‡∏á</span>
        <span class="category-item" data-category="‡∏ï‡πà‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®">‡∏ï‡πà‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®</span>
        <span class="category-item" data-category="‡∏ö‡∏±‡∏ô‡πÄ‡∏ó‡∏¥‡∏á">‡∏ö‡∏±‡∏ô‡πÄ‡∏ó‡∏¥‡∏á</span>
        <span class="category-item" data-category="‡πÄ‡∏®‡∏£‡∏©‡∏ê‡∏Å‡∏¥‡∏à">‡πÄ‡∏®‡∏£‡∏©‡∏ê‡∏Å‡∏¥‡∏à</span>
        <span class="category-item" data-category="‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡πà‡∏≠‡∏á‡πÄ‡∏•‡∏Ç">‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡πà‡∏≠‡∏á‡πÄ‡∏•‡∏Ç</span>
        <span class="category-item breaking" data-category="breaking">üî• ‡∏Ç‡πà‡∏≤‡∏ß‡∏î‡πà‡∏ß‡∏ô</span>
    </div>

    <!-- Breaking News Ticker -->
    <div class="breaking-ticker" id="breaking-ticker">
        <span class="ticker-label">‡∏Ç‡πà‡∏≤‡∏ß‡∏î‡πà‡∏ß‡∏ô</span>
        <div class="ticker-item" onclick="showPostDetail('post3')">‚ö†Ô∏è ‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏¥‡∏î‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏Ñ‡∏∑‡∏ô‡∏ô‡∏µ‡πâ 23:00 ‡∏ô.</div>
        <div class="ticker-item" onclick="showPostDetail('post5')">üö® ‡πÄ‡∏Å‡∏¥‡∏î‡πÄ‡∏´‡∏ï‡∏∏‡πÅ‡∏ú‡πà‡∏ô‡∏î‡∏¥‡∏ô‡πÑ‡∏´‡∏ß‡∏Ç‡∏ô‡∏≤‡∏î 4.2 ‡∏à.‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡∏£‡∏≤‡∏¢</div>
        <div class="ticker-item" onclick="showPostDetail('post7')">üì¢ ‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏´‡∏¢‡∏∏‡∏î‡∏à‡πà‡∏≤‡∏¢‡∏ô‡πâ‡∏≥ 9 ‡πÄ‡∏Ç‡∏ï ‡∏ß‡∏±‡∏ô‡∏û‡∏£‡∏∏‡πà‡∏á‡∏ô‡∏µ‡πâ</div>
    </div>

    <!-- Lottery Card -->
    <div class="lottery-card">
        <div class="flex justify-between items-center">
            <span class="font-bold">üé∞ ‡πÄ‡∏•‡∏Ç‡πÄ‡∏î‡πá‡∏î 16/2/69</span>
            <span class="text-xs opacity-80">‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</span>
        </div>
        <div class="lottery-numbers">
            <div class="lottery-number">
                <div class="label">‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏ó‡∏µ‡πà 1</div>
                <div class="value">340563</div>
            </div>
            <div class="lottery-number">
                <div class="label">‡πÄ‡∏•‡∏Ç‡∏´‡∏ô‡πâ‡∏≤ 3 ‡∏ï‡∏±‡∏ß</div>
                <div class="value">527</div>
            </div>
            <div class="lottery-number">
                <div class="label">‡πÄ‡∏•‡∏Ç‡∏ó‡πâ‡∏≤‡∏¢ 3 ‡∏ï‡∏±‡∏ß</div>
                <div class="value">578</div>
            </div>
        </div>
    </div>

    <!-- Section: ‡∏Ç‡πà‡∏≤‡∏ß‡∏£‡∏≠‡∏ö‡∏ß‡∏±‡∏ô -->
    <div class="section-header">
        <div class="section-title">
            <i class="fas fa-newspaper"></i> ‡∏Ç‡πà‡∏≤‡∏ß‡∏£‡∏≠‡∏ö‡∏ß‡∏±‡∏ô
        </div>
        <span class="view-all">‡∏î‡∏π‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î <i class="fas fa-chevron-right text-xs"></i></span>
    </div>

    <!-- News Grid -->
    <div class="news-grid" id="news-grid"></div>

    <!-- Section: ‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡πà‡∏≠‡∏á‡πÄ‡∏•‡∏Ç -->
    <div class="section-header">
        <div class="section-title">
            <i class="fas fa-search"></i> ‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡πà‡∏≠‡∏á‡πÄ‡∏•‡∏Ç
        </div>
        <span class="view-all">‡∏î‡∏π‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î <i class="fas fa-chevron-right text-xs"></i></span>
    </div>

    <!-- Lottery News Grid -->
    <div class="news-grid" id="lottery-news-grid"></div>

    <!-- Bottom Navigation -->
    <div class="bottom-nav">
        <div class="nav-item active" data-tab="home">
            <i class="fas fa-home"></i>
            <span>‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</span>
        </div>
        <div class="nav-item" data-tab="categories">
            <i class="fas fa-th-large"></i>
            <span>‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</span>
        </div>
        <div class="nav-item" data-tab="saved">
            <i class="fas fa-bookmark"></i>
            <span>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ß‡πâ</span>
        </div>
        <div class="nav-item" data-tab="profile">
            <i class="fas fa-user"></i>
            <span>‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå</span>
        </div>
    </div>

    <!-- Post Detail Modal -->
    <div class="modal" id="post-modal">
        <div class="modal-header">
            <div class="modal-back" onclick="closeModal()">
                <i class="fas fa-arrow-left"></i>
            </div>
            <div class="font-bold">‡∏Ç‡πà‡∏≤‡∏ß</div>
        </div>
        <div id="modal-detail-content"></div>
        <div class="modal-footer">
            <button class="btn-share" onclick="shareCurrentPost()">
                <i class="fab fa-line"></i> ‡πÅ‡∏ä‡∏£‡πå
            </button>
            <button class="btn-close" onclick="closeModal()">‡∏õ‡∏¥‡∏î</button>
        </div>
    </div>

    <script>
        // ========== CONFIG ==========
        const CONFIG = {
            LIFF_ID: '2008904120-T7I0VPZf',
            GAS_URL: 'https://script.google.com/macros/s/AKfycbwSz6Y_fpvB0qN52eS6QD2RFJD-bJA369B6b86W1ZGVCOrbPXGGbpBIS3hDO8h6awKzkw/exec'
        };

        // ========== STATE ==========
        const state = {
            currentPost: null,
            currentCategory: 'all'
        };

        // ========== MOCK DATA ==========
        const newsData = [
            {
                id: 'post1',
                category: '‡∏≠‡∏≤‡∏ä‡∏ç‡∏≤‡∏Å‡∏£‡∏£‡∏°',
                title: '‡∏£‡∏ß‡∏ö‡∏≠‡∏î‡∏µ‡∏ï‡πÅ‡∏ü‡∏ô‡∏ó‡∏≥‡∏£‡πâ‡∏≤‡∏¢‡∏™‡∏≤‡∏ß 4 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏†‡∏≤‡∏û‡∏•‡∏±‡∏ö‡∏•‡∏á‡πÄ‡∏ü‡∏ã‡∏ö‡∏∏‡πä‡∏Å ‡∏Å‡πà‡∏≠‡∏ô‡∏à‡∏ö‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏Ñ‡∏≤‡∏´‡πâ‡∏≠‡∏á‡∏Ç‡∏±‡∏á',
                content: '‡∏ï‡∏≥‡∏£‡∏ß‡∏à‡∏ä‡∏∏‡∏î‡∏™‡∏∑‡∏ö‡∏™‡∏ß‡∏ô ‡∏™‡∏ô.‡∏ö‡∏≤‡∏á‡πÄ‡∏Ç‡∏ô ‡∏à‡∏±‡∏ö‡∏Å‡∏∏‡∏°‡∏ô‡∏≤‡∏¢‡∏Å‡πâ‡∏≠‡∏á‡∏†‡∏û (‡∏™‡∏á‡∏ß‡∏ô‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•) ‡∏≠‡∏≤‡∏¢‡∏∏ 28 ‡∏õ‡∏µ ‡∏ú‡∏π‡πâ‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏≤‡∏ï‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢‡∏à‡∏±‡∏ö‡∏®‡∏≤‡∏•‡∏≠‡∏≤‡∏ç‡∏≤...',
                imageUrl: 'https://via.placeholder.com/800x450/ef4444/ffffff?text=‡∏≠‡∏≤‡∏ä‡∏ç‡∏≤‡∏Å‡∏£‡∏£‡∏°',
                author: '‡∏Å‡∏≠‡∏á‡∏ö‡∏£‡∏£‡∏ì‡∏≤‡∏ò‡∏¥‡∏Å‡∏≤‡∏£',
                date: '2026-02-17T10:30:00',
                views: 895
            },
            {
                id: 'post2',
                category: '‡∏≠‡∏≤‡∏ä‡∏ç‡∏≤‡∏Å‡∏£‡∏£‡∏°',
                title: '‡∏´‡∏•‡∏≤‡∏ô‡∏Ñ‡∏•‡∏±‡πà‡∏á‡∏ü‡∏±‡∏ô‡∏ï‡∏≤‡∏î‡∏±‡∏ö‡∏Ñ‡∏≤‡∏ö‡πâ‡∏≤‡∏ô ‡∏≠‡πâ‡∏≤‡∏á‡∏â‡∏∏‡∏ô‡∏ñ‡∏π‡∏Å‡∏î‡πà‡∏≤‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Å‡∏¥‡∏ô‡∏Ç‡πâ‡∏≤‡∏ß',
                content: '‡πÄ‡∏Å‡∏¥‡∏î‡πÄ‡∏´‡∏ï‡∏∏‡∏™‡∏•‡∏î‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏ö‡πâ‡∏≤‡∏ô‡∏û‡∏±‡∏Å‡πÉ‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà ‡∏à.‡∏™‡∏°‡∏∏‡∏ó‡∏£‡∏õ‡∏£‡∏≤‡∏Å‡∏≤‡∏£ ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ô‡∏≤‡∏¢‡∏≠‡∏≤‡∏ô‡∏ô‡∏ó‡πå (‡∏™‡∏á‡∏ß‡∏ô‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•) ‡∏≠‡∏≤‡∏¢‡∏∏ 35 ‡∏õ‡∏µ ‡∏Å‡πà‡∏≠‡πÄ‡∏´‡∏ï‡∏∏‡πÉ‡∏ä‡πâ‡∏°‡∏µ‡∏î‡∏û‡∏£‡πâ‡∏≤‡∏ü‡∏±‡∏ô‡∏ô‡∏≤‡∏¢‡∏õ‡∏£‡∏∞‡∏¢‡∏π‡∏£ (‡∏™‡∏á‡∏ß‡∏ô‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•) ‡∏≠‡∏≤‡∏¢‡∏∏ 70 ‡∏õ‡∏µ ‡∏ã‡∏∂‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏≤ ‡πÄ‡∏™‡∏µ‡∏¢‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏Ñ‡∏≤‡∏ó‡∏µ‡πà',
                imageUrl: 'https://via.placeholder.com/800x450/ef4444/ffffff?text=‡∏≠‡∏≤‡∏ä‡∏ç‡∏≤‡∏Å‡∏£‡∏£‡∏°',
                author: '‡∏Å‡∏≠‡∏á‡∏ö‡∏£‡∏£‡∏ì‡∏≤‡∏ò‡∏¥‡∏Å‡∏≤‡∏£',
                date: '2026-02-17T08:15:00',
                views: 33
            },
            {
                id: 'post3',
                category: '‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏∑‡∏≠‡∏á',
                title: '"‡∏†‡∏π‡∏°‡∏¥‡∏ò‡∏£‡∏£‡∏°"‡πÄ‡∏ú‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏û‡∏£‡∏£‡∏Ñ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏ó‡∏¢‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏£‡∏±‡∏ê‡∏ö‡∏≤‡∏•',
                content: '‡∏ô‡∏≤‡∏¢‡∏†‡∏π‡∏°‡∏¥‡∏ò‡∏£‡∏£‡∏° ‡πÄ‡∏ß‡∏ä‡∏¢‡∏ä‡∏±‡∏¢ ‡∏£‡∏≠‡∏á‡∏´‡∏±‡∏ß‡∏´‡∏ô‡πâ‡∏≤‡∏û‡∏£‡∏£‡∏Ñ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏ó‡∏¢ ‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ú‡∏¢‡∏ñ‡∏∂‡∏á‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡∏ó‡∏µ‡πà‡∏û‡∏£‡∏£‡∏Ñ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏ó‡∏¢‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏£‡∏±‡∏ê‡∏ö‡∏≤‡∏•...',
                imageUrl: 'https://via.placeholder.com/800x450/3b82f6/ffffff?text=‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏∑‡∏≠‡∏á',
                author: '‡∏Å‡∏≠‡∏á‡∏ö‡∏£‡∏£‡∏ì‡∏≤‡∏ò‡∏¥‡∏Å‡∏≤‡∏£',
                date: '2026-02-15T14:20:00',
                views: 178
            },
            {
                id: 'post4',
                category: '‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©',
                title: '‡∏≠‡∏ò‡∏¥‡∏ö‡∏î‡∏µ‡∏Å‡∏£‡∏°‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÇ‡∏£‡∏Ñ ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏û‡∏ö‡∏ú‡∏π‡πâ‡∏ï‡πâ‡∏≠‡∏á‡∏Ç‡∏±‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏î‡πâ‡∏ß‡∏¢‡πÇ‡∏£‡∏Ñ‡∏ù‡∏µ‡∏î‡∏≤‡∏©‡∏ß‡∏≤‡∏ô‡∏£ 1 ‡∏£‡∏≤‡∏¢',
                content: '‡∏≠‡∏ò‡∏¥‡∏ö‡∏î‡∏µ‡∏Å‡∏£‡∏°‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÇ‡∏£‡∏Ñ ‡πÅ‡∏ñ‡∏•‡∏á‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏û‡∏ö‡∏ú‡∏π‡πâ‡∏ï‡πâ‡∏≠‡∏á‡∏Ç‡∏±‡∏á‡πÉ‡∏ô‡πÄ‡∏£‡∏∑‡∏≠‡∏ô‡∏à‡∏≥‡πÅ‡∏´‡πà‡∏á‡∏´‡∏ô‡∏∂‡πà‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏î‡πâ‡∏ß‡∏¢‡πÇ‡∏£‡∏Ñ‡∏ù‡∏µ‡∏î‡∏≤‡∏©‡∏ß‡∏≤‡∏ô‡∏£ 1 ‡∏£‡∏≤‡∏¢...',
                imageUrl: 'https://via.placeholder.com/800x450/8b5cf6/ffffff?text=‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©',
                author: '‡∏Å‡∏≠‡∏á‡∏ö‡∏£‡∏£‡∏ì‡∏≤‡∏ò‡∏¥‡∏Å‡∏≤‡∏£',
                date: '2026-02-15T11:10:00',
                views: 144
            },
            {
                id: 'post5',
                category: '‡∏ï‡πà‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®',
                title: '‡πÅ‡∏ú‡πà‡∏ô‡∏î‡∏¥‡∏ô‡πÑ‡∏´‡∏ß‡∏Ç‡∏ô‡∏≤‡∏î 4.2 ‡πÄ‡∏Ç‡∏¢‡πà‡∏≤‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡∏£‡∏≤‡∏¢ ‡∏£‡∏±‡∏ö‡∏£‡∏π‡πâ‡πÅ‡∏£‡∏á‡∏™‡∏±‡πà‡∏ô‡∏™‡∏∞‡πÄ‡∏ó‡∏∑‡∏≠‡∏ô‡∏ñ‡∏∂‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏°‡∏∑‡∏≠‡∏á',
                content: '‡πÄ‡∏Å‡∏¥‡∏î‡πÄ‡∏´‡∏ï‡∏∏‡πÅ‡∏ú‡πà‡∏ô‡∏î‡∏¥‡∏ô‡πÑ‡∏´‡∏ß‡∏Ç‡∏ô‡∏≤‡∏î 4.2 ‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏∂‡∏Å 5 ‡∏Å‡∏¥‡πÇ‡∏•‡πÄ‡∏°‡∏ï‡∏£ ‡∏ö‡∏£‡∏¥‡πÄ‡∏ß‡∏ì‡∏≠‡∏≥‡πÄ‡∏†‡∏≠‡πÅ‡∏°‡πà‡∏™‡∏£‡∏ß‡∏¢ ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡∏£‡∏≤‡∏¢...',
                imageUrl: 'https://via.placeholder.com/800x450/8b5cf6/ffffff?text=‡∏ï‡πà‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®',
                author: '‡∏Å‡∏≠‡∏á‡∏ö‡∏£‡∏£‡∏ì‡∏≤‡∏ò‡∏¥‡∏Å‡∏≤‡∏£',
                date: '2026-02-16T23:45:00',
                views: 234
            },
            {
                id: 'post6',
                category: '‡∏ö‡∏±‡∏ô‡πÄ‡∏ó‡∏¥‡∏á',
                title: '"‡∏ï‡∏±‡∏ô ‡∏≠‡∏¥‡∏ä‡∏¥‡∏ï‡∏±‡∏ô" ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏≠‡∏≤‡∏Å‡∏≤‡∏£ ‡∏´‡∏•‡∏±‡∏á‡∏ï‡∏Å‡πÄ‡∏ß‡∏ó‡∏µ‡∏™‡∏π‡∏á 2 ‡πÄ‡∏°‡∏ï‡∏£',
                content: '‡∏ô‡∏≤‡∏¢‡∏ï‡∏±‡∏ô ‡∏†‡∏≤‡∏™‡∏Å‡∏£‡∏ô‡∏ó‡∏µ ‡πÄ‡∏ú‡∏¢‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡πÄ‡∏Å‡∏¥‡∏î‡∏≠‡∏∏‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏´‡∏ï‡∏∏‡∏ï‡∏Å‡πÄ‡∏ß‡∏ó‡∏µ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏à‡∏±‡∏î‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 2 ‡πÄ‡∏°‡∏ï‡∏£...',
                imageUrl: 'https://via.placeholder.com/800x450/ec4899/ffffff?text=‡∏ö‡∏±‡∏ô‡πÄ‡∏ó‡∏¥‡∏á',
                author: '‡∏Å‡∏≠‡∏á‡∏ö‡∏£‡∏£‡∏ì‡∏≤‡∏ò‡∏¥‡∏Å‡∏≤‡∏£',
                date: '2026-02-16T09:30:00',
                views: 227
            },
            {
                id: 'post7',
                category: '‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡πà‡∏≠‡∏á‡πÄ‡∏•‡∏Ç',
                title: '‡∏™‡∏∏‡∏ô‡∏±‡∏Ç‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå‡∏ó‡∏≤‡∏á‡∏ß‡∏±‡∏¢ 3 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô ‡∏°‡∏µ‡∏ô‡∏¥‡πâ‡∏ß‡πÄ‡∏ó‡πâ‡∏≤‡∏£‡∏ß‡∏° 12 ‡∏ô‡∏¥‡πâ‡∏ß',
                content: '‡∏ä‡∏≤‡∏ß‡∏ö‡πâ‡∏≤‡∏ô‡πÉ‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà ‡∏à.‡∏ô‡∏Ñ‡∏£‡∏£‡∏≤‡∏ä‡∏™‡∏µ‡∏°‡∏≤ ‡∏ï‡πà‡∏≤‡∏á‡∏û‡∏≤‡∏Å‡∏±‡∏ô‡∏°‡∏≤‡∏î‡∏π‡∏™‡∏∏‡∏ô‡∏±‡∏Ç‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå‡∏ó‡∏≤‡∏á‡∏ß‡∏±‡∏¢ 3 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏ô‡∏¥‡πâ‡∏ß‡πÄ‡∏ó‡πâ‡∏≤‡∏£‡∏ß‡∏° 12 ‡∏ô‡∏¥‡πâ‡∏ß...',
                imageUrl: 'https://via.placeholder.com/800x450/f59e0b/ffffff?text=‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡πà‡∏≠‡∏á‡πÄ‡∏•‡∏Ç',
                author: '‡∏Å‡∏≠‡∏á‡∏ö‡∏£‡∏£‡∏ì‡∏≤‡∏ò‡∏¥‡∏Å‡∏≤‡∏£',
                date: '2026-02-10T13:15:00',
                views: 173
            },
            {
                id: 'post8',
                category: '‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡πà‡∏≠‡∏á‡πÄ‡∏•‡∏Ç',
                title: '‡∏ô‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ô‡∏≤‡∏á‡∏£‡∏≥‡πÅ‡∏•‡πâ‡∏ß‡∏≠‡∏∂‡πâ‡∏á! ‡∏û‡∏¥‡∏ò‡∏µ‡∏ö‡∏ß‡∏á‡∏™‡∏£‡∏ß‡∏á‡∏™‡∏¥‡πà‡∏á‡∏®‡∏±‡∏Å‡∏î‡∏¥‡πå‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå',
                content: '‡∏ä‡∏≤‡∏ß‡∏ö‡πâ‡∏≤‡∏ô‡∏£‡πà‡∏ß‡∏°‡∏û‡∏¥‡∏ò‡∏µ‡∏ö‡∏ß‡∏á‡∏™‡∏£‡∏ß‡∏á‡∏™‡∏¥‡πà‡∏á‡∏®‡∏±‡∏Å‡∏î‡∏¥‡πå‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÅ‡∏•‡∏∞‡∏£‡∏≥‡∏ñ‡∏ß‡∏≤‡∏¢‡∏™‡∏°‡πÄ‡∏î‡πá‡∏à‡∏û‡∏£‡∏∞‡πÄ‡∏à‡πâ‡∏≤‡∏≠‡∏π‡πà‡∏ó‡∏≠‡∏á ‡∏õ‡∏£‡∏≤‡∏Å‡∏è‡∏ß‡πà‡∏≤‡∏ô‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ô‡∏≤‡∏á‡∏£‡∏≥‡πÅ‡∏•‡πâ‡∏ß‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏Ç‡πÄ‡∏î‡πá‡∏î...',
                imageUrl: 'https://via.placeholder.com/800x450/f59e0b/ffffff?text=‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡πà‡∏≠‡∏á‡πÄ‡∏•‡∏Ç',
                author: '‡∏Å‡∏≠‡∏á‡∏ö‡∏£‡∏£‡∏ì‡∏≤‡∏ò‡∏¥‡∏Å‡∏≤‡∏£',
                date: '2026-02-06T10:20:00',
                views: 98
            }
        ];

        // ========== UTILS ==========
        function showLoading() { document.getElementById('loading').classList.add('active'); }
        function hideLoading() { document.getElementById('loading').classList.remove('active'); }

        function showToast(msg, type = 'success') {
            const toast = document.getElementById('toast');
            toast.textContent = msg;
            toast.style.backgroundColor = type === 'success' ? '#10b981' : '#ef4444';
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }

        function formatDate(dateStr) {
            const d = new Date(dateStr);
            const day = d.getDate();
            const month = d.toLocaleDateString('th-TH', { month: 'short' });
            return `${day} ${month} ${d.getFullYear()+543}`;
        }

        // ========== RENDER NEWS ==========
        function renderNews() {
            const newsGrid = document.getElementById('news-grid');
            const lotteryGrid = document.getElementById('lottery-news-grid');
            
            // ‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà
            let filteredNews = newsData;
            if (state.currentCategory !== 'all') {
                filteredNews = newsData.filter(n => n.category === state.currentCategory);
            }

            // ‡πÅ‡∏¢‡∏Å‡∏Ç‡πà‡∏≤‡∏ß‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ‡∏Å‡∏±‡∏ö‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡πà‡∏≠‡∏á‡πÄ‡∏•‡∏Ç
            const generalNews = filteredNews.filter(n => n.category !== '‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡πà‡∏≠‡∏á‡πÄ‡∏•‡∏Ç');
            const lotteryNews = filteredNews.filter(n => n.category === '‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡πà‡∏≠‡∏á‡πÄ‡∏•‡∏Ç');

            // Render ‡∏Ç‡πà‡∏≤‡∏ß‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ
            newsGrid.innerHTML = generalNews.map(news => createNewsCard(news)).join('');
            
            // Render ‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡πà‡∏≠‡∏á‡πÄ‡∏•‡∏Ç
            lotteryGrid.innerHTML = lotteryNews.map(news => createNewsCard(news)).join('');
        }

        function createNewsCard(news) {
            const categoryClass = `category-${news.category}`;
            const categoryMap = {
                '‡∏≠‡∏≤‡∏ä‡∏ç‡∏≤‡∏Å‡∏£‡∏£‡∏°': '‡∏≠‡∏≤‡∏ä‡∏ç‡∏≤‡∏Å‡∏£‡∏£‡∏°',
                '‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏∑‡∏≠‡∏á': '‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏∑‡∏≠‡∏á',
                '‡∏ï‡πà‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®': '‡∏ï‡πà‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®',
                '‡∏ö‡∏±‡∏ô‡πÄ‡∏ó‡∏¥‡∏á': '‡∏ö‡∏±‡∏ô‡πÄ‡∏ó‡∏¥‡∏á',
                '‡πÄ‡∏®‡∏£‡∏©‡∏ê‡∏Å‡∏¥‡∏à': '‡πÄ‡∏®‡∏£‡∏©‡∏ê‡∏Å‡∏¥‡∏à',
                '‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡πà‡∏≠‡∏á‡πÄ‡∏•‡∏Ç': '‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡πà‡∏≠‡∏á‡πÄ‡∏•‡∏Ç',
                '‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©': '‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©'
            };
            
            return `
                <div class="news-card" onclick="showPostDetail('${news.id}')">
                    <div class="card-image-container">
                        <img src="${news.imageUrl}" class="card-image" loading="lazy">
                        <span class="card-category ${categoryClass}">${categoryMap[news.category] || news.category}</span>
                        <button class="share-button" onclick="event.stopPropagation(); sharePost('${news.id}')">
                            <i class="fab fa-line"></i>
                        </button>
                    </div>
                    <div class="card-content">
                        <h3 class="card-title">${news.title}</h3>
                        <div class="card-meta">
                            <span><i class="far fa-clock"></i> ${formatDate(news.date)}</span>
                            <span class="view-count"><i class="far fa-eye"></i> ${news.views}</span>
                        </div>
                    </div>
                </div>
            `;
        }

        // ========== SHARE FUNCTION ==========
        async function sharePost(postId) {
            const post = newsData.find(n => n.id === postId);
            if (!post) return;

            showLoading();

            try {
                // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö LIFF
                if (!liff.isInClient()) {
                    showToast('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ô LINE ‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô', 'error');
                    return;
                }

                // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
                if (!liff.isLoggedIn()) {
                    liff.login();
                    return;
                }

                // ‡∏™‡∏£‡πâ‡∏≤‡∏á Flex Message
                const flexMessage = {
                    type: 'flex',
                    altText: post.title.substring(0, 40),
                    contents: {
                        type: 'bubble',
                        hero: {
                            type: 'image',
                            url: post.imageUrl,
                            size: 'full',
                            aspectRatio: '16:9',
                            aspectMode: 'cover',
                            backgroundColor: '#06c755'
                        },
                        body: {
                            type: 'box',
                            layout: 'vertical',
                            spacing: 'md',
                            contents: [
                                {
                                    type: 'box',
                                    layout: 'baseline',
                                    contents: [
                                        {
                                            type: 'text',
                                            text: post.category,
                                            size: 'xs',
                                            color: '#06c755',
                                            weight: 'bold'
                                        }
                                    ]
                                },
                                {
                                    type: 'text',
                                    text: post.title,
                                    weight: 'bold',
                                    size: 'lg',
                                    wrap: true
                                },
                                {
                                    type: 'text',
                                    text: post.content.substring(0, 80) + '...',
                                    wrap: true,
                                    color: '#8c8c8c',
                                    size: 'sm',
                                    maxLines: 3
                                },
                                {
                                    type: 'box',
                                    layout: 'horizontal',
                                    spacing: 'sm',
                                    contents: [
                                        {
                                            type: 'text',
                                            text: post.author,
                                            size: 'xs',
                                            color: '#aaaaaa'
                                        },
                                        {
                                            type: 'text',
                                            text: '‚Ä¢',
                                            size: 'xs',
                                            color: '#aaaaaa'
                                        },
                                        {
                                            type: 'text',
                                            text: formatDate(post.date),
                                            size: 'xs',
                                            color: '#aaaaaa'
                                        }
                                    ]
                                }
                            ]
                        },
                        footer: {
                            type: 'box',
                            layout: 'vertical',
                            spacing: 'sm',
                            contents: [
                                {
                                    type: 'button',
                                    style: 'primary',
                                    color: '#06c755',
                                    action: {
                                        type: 'uri',
                                        label: '‡∏≠‡πà‡∏≤‡∏ô‡∏ï‡πà‡∏≠',
                                        uri: `https://line.me/R/app/${CONFIG.LIFF_ID}`
                                    }
                                }
                            ]
                        }
                    }
                };

                console.log('Sharing flex message:', flexMessage);

                // ‡πÅ‡∏ä‡∏£‡πå‡∏ú‡πà‡∏≤‡∏ô LINE
                const result = await liff.shareTargetPicker([flexMessage]);
                
                if (result) {
                    showToast('‚úÖ ‡πÅ‡∏ä‡∏£‡πå‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
                } else {
                    showToast('‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏ä‡∏£‡πå', 'error');
                }

            } catch (error) {
                console.error('Share error:', error);
                showToast('‡πÅ‡∏ä‡∏£‡πå‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: ' + error.message, 'error');
            } finally {
                hideLoading();
            }
        }

        // ‡πÅ‡∏ä‡∏£‡πå‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
        function shareCurrentPost() {
            if (state.currentPost) {
                sharePost(state.currentPost.id);
            }
        }

        // ========== POST DETAIL ==========
        function showPostDetail(postId) {
            const post = newsData.find(n => n.id === postId);
            if (!post) return;

            state.currentPost = post;

            const categoryClass = `category-${post.category}`;
            const categoryMap = {
                '‡∏≠‡∏≤‡∏ä‡∏ç‡∏≤‡∏Å‡∏£‡∏£‡∏°': '‡∏≠‡∏≤‡∏ä‡∏ç‡∏≤‡∏Å‡∏£‡∏£‡∏°',
                '‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏∑‡∏≠‡∏á': '‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏∑‡∏≠‡∏á',
                '‡∏ï‡πà‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®': '‡∏ï‡πà‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®',
                '‡∏ö‡∏±‡∏ô‡πÄ‡∏ó‡∏¥‡∏á': '‡∏ö‡∏±‡∏ô‡πÄ‡∏ó‡∏¥‡∏á',
                '‡πÄ‡∏®‡∏£‡∏©‡∏ê‡∏Å‡∏¥‡∏à': '‡πÄ‡∏®‡∏£‡∏©‡∏ê‡∏Å‡∏¥‡∏à',
                '‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡πà‡∏≠‡∏á‡πÄ‡∏•‡∏Ç': '‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡πà‡∏≠‡∏á‡πÄ‡∏•‡∏Ç',
                '‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©': '‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©'
            };

            const html = `
                <img src="${post.imageUrl}" class="modal-image" onerror="this.src='https://via.placeholder.com/800x450/2a2e36/ffffff?text=LINE'">
                <div class="modal-content">
                    <span class="modal-category ${categoryClass}">${categoryMap[post.category] || post.category}</span>
                    <h1 class="modal-title">${post.title}</h1>
                    <div class="flex items-center gap-4 text-sm text-gray-500 mb-4">
                        <span><i class="far fa-user mr-1"></i> ${post.author}</span>
                        <span><i class="far fa-calendar mr-1"></i> ${formatDate(post.date)}</span>
                        <span><i class="far fa-eye mr-1"></i> ${post.views}</span>
                    </div>
                    <div class="modal-body">${post.content}</div>
                </div>
            `;

            document.getElementById('modal-detail-content').innerHTML = html;
            document.getElementById('post-modal').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            document.getElementById('post-modal').classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // ========== CATEGORY FILTER ==========
        document.querySelectorAll('.category-item').forEach(item => {
            item.addEventListener('click', () => {
                document.querySelectorAll('.category-item').forEach(i => i.classList.remove('active'));
                item.classList.add('active');
                state.currentCategory = item.dataset.category;
                renderNews();
            });
        });

        // ========== BOTTOM NAV ==========
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', () => {
                document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
                item.classList.add('active');
                // ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏ó‡πá‡∏ö‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà
            });
        });

        // ========== LIFF INIT ==========
        async function initLIFF() {
            try {
                await liff.init({ liffId: CONFIG.LIFF_ID });
                console.log('LIFF initialized');
                
                if (!liff.isLoggedIn()) {
                    liff.login();
                } else {
                    showToast('‚úÖ ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ LINE ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
                }
            } catch (error) {
                console.error('LIFF init error:', error);
                showToast('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ LINE ‡πÑ‡∏î‡πâ', 'error');
            }
        }

        // ========== INIT ==========
        document.addEventListener('DOMContentLoaded', () => {
            renderNews();
            initLIFF();
        });
    </script>
</body>
</html>
